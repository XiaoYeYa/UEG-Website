{% extends "base.html" %}

{% block title %} - 地下城资格抽签{% endblock %}

{% block content %}
<div class="lottery-page">
    <div class="page-header">
        <div class="header-content">
            <h1 class="depth-text">
                <span class="cn">地下城资格抽签</span>
                <span class="en">UNDERGROUND CITY LOTTERY</span>
            </h1>
            <p class="subtitle">本期开放城市：3847号、2571号、1024号</p>
        </div>
    </div>

    <div class="lottery-content">
        <div class="status-section">
            <div class="status-card">
                <h2 class="depth-text">
                    <span class="cn">抽签状态</span>
                    <span class="en">LOTTERY STATUS</span>
                </h2>
                <div class="status-grid">
                    <div class="status-item">
                        <span class="label">本期名额</span>
                        <span class="value" data-number-animation="50000">0</span>
                    </div>
                    <div class="status-item">
                        <span class="label">已申请人数</span>
                        <span class="value" data-number-animation="238567">0</span>
                    </div>
                    <div class="status-item">
                        <span class="label">当前中签率</span>
                        <span class="value">20.96%</span>
                    </div>
                    <div class="status-item">
                        <span class="label">剩余时间</span>
                        <span class="countdown">23:59:59</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="form-card">
                <h2 class="depth-text">
                    <span class="cn">申请信息</span>
                    <span class="en">APPLICATION INFO</span>
                </h2>
                <form id="lottery-form" class="lottery-form">
                    <div class="form-group">
                        <label for="city">意向城市</label>
                        <select id="city" name="city" required>
                            <option value="">请选择城市</option>
                            <option value="3847">3847号城市 - 前青藏高原区域</option>
                            <option value="2571">2571号城市 - 前喜马拉雅山脉区域</option>
                            <option value="1024">1024号城市 - 前阿尔卑斯山脉区域</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="family-size">家庭人数</label>
                        <input type="number" id="family-size" name="family-size" min="1" max="6" required>
                        <span class="form-hint">每个家庭最多6人</span>
                    </div>

                    <div class="form-group">
                        <label for="current-location">当前所在地</label>
                        <input type="text" id="current-location" name="current-location" required>
                    </div>

                    <div class="form-group">
                        <label for="reason">申请理由</label>
                        <textarea id="reason" name="reason" rows="4" required></textarea>
                        <span class="form-hint">请简要说明申请理由，不超过200字</span>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="submit-btn">
                            提交申请
                            <span class="arrow">→</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="info-section">
            <div class="info-card">
                <h2 class="depth-text">
                    <span class="cn">申请须知</span>
                    <span class="en">NOTICE</span>
                </h2>
                <div class="info-content">
                    <h3>申请条件</h3>
                    <ul>
                        <li>必须是注册公民</li>
                        <li>家庭成员不超过6人</li>
                        <li>无不良信用记录</li>
                        <li>具备基本生存技能认证</li>
                    </ul>

                    <h3>注意事项</h3>
                    <ul>
                        <li>每个公民ID每期只能申请一次</li>
                        <li>中签后需在24小时内确认</li>
                        <li>确认后7天内完成迁入</li>
                        <li>放弃中签资格将影响后续申请</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.lottery-page {
    min-height: 100vh;
    background: #000;
    color: #fff;
    padding-top: 80px;
}

.page-header {
    background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=1920&auto=format') center/cover;
    padding: 4rem 2rem;
    text-align: center;
}

.subtitle {
    margin-top: 1rem;
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.2rem;
}

.lottery-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 4rem 2rem;
    display: grid;
    gap: 3rem;
}

.status-card {
    background: rgba(13, 13, 13, 0.8);
    border: 1px solid rgba(255, 69, 58, 0.2);
    border-radius: 20px;
    padding: 2rem;
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.status-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    text-align: center;
}

.status-item .label {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.9rem;
}

.status-item .value {
    font-size: 2rem;
    font-weight: 700;
    color: #FF453A;
}

.countdown {
    font-family: 'SF Mono', monospace;
    font-size: 2rem;
    font-weight: 700;
    color: #FF9F0A;
}

.form-card {
    background: rgba(13, 13, 13, 0.8);
    border: 1px solid rgba(255, 69, 58, 0.2);
    border-radius: 20px;
    padding: 2rem;
}

.lottery-form {
    margin-top: 2rem;
    display: grid;
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label {
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.9rem;
}

.form-hint {
    color: rgba(255, 255, 255, 0.5);
    font-size: 0.8rem;
}

input, select, textarea {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 0.75rem 1rem;
    color: #fff;
    font-size: 1rem;
    transition: all 0.3s ease;
}

input:focus, select:focus, textarea:focus {
    border-color: #FF453A;
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 69, 58, 0.2);
}

.submit-btn {
    width: 100%;
    padding: 1rem;
    background: #FF453A;
    border: none;
    border-radius: 10px;
    color: #fff;
    font-size: 1rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.submit-btn:hover {
    background: #FF5146;
}

.info-card {
    background: rgba(13, 13, 13, 0.8);
    border: 1px solid rgba(255, 69, 58, 0.2);
    border-radius: 20px;
    padding: 2rem;
}

.info-content {
    margin-top: 2rem;
}

.info-content h3 {
    color: #FF453A;
    margin: 1.5rem 0 1rem;
}

.info-content ul {
    list-style: none;
    padding: 0;
}

.info-content li {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 0.5rem;
    padding-left: 1.5rem;
    position: relative;
}

.info-content li::before {
    content: "•";
    color: #FF453A;
    position: absolute;
    left: 0;
}

@media (max-width: 768px) {
    .lottery-content {
        padding: 2rem 1rem;
    }

    .status-grid {
        grid-template-columns: 1fr 1fr;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // 倒计时功能
    function updateCountdown() {
        const now = new Date();
        const end = new Date();
        end.setHours(23, 59, 59);
        
        const diff = end - now;
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        const countdown = document.querySelector('.countdown');
        countdown.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }
    
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // 表单提交处理
    const form = document.getElementById('lottery-form');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 这里添加表单验证和提交逻辑
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // 模拟API调用
        setTimeout(() => {
            alert('申请提交成功！请等待抽签结果。');
            form.reset();
        }, 1000);
    });
});
</script>
{% endblock %} 